<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hello World | LuSia Ventus</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="/images/圆形pink.png">
    <meta name="description" content="Ventus` Blog">
    <meta name="keywords" content="LuSia Ventus, Ventus, vuepress-theme-simple, 博客, vue">
    <meta name="author" content="Ventus">
    
    <link rel="preload" href="/assets/css/3.styles.0523860e.css" as="style"><link rel="preload" href="/assets/js/app.daa4b047.js" as="script"><link rel="preload" href="/assets/js/0.64ac24e1.js" as="script"><link rel="preload" href="/assets/js/20.3be70d4f.js" as="script"><link rel="prefetch" href="/assets/js/1.ea54e935.js"><link rel="prefetch" href="/assets/js/10.4e625bc9.js"><link rel="prefetch" href="/assets/js/11.afa8792e.js"><link rel="prefetch" href="/assets/js/12.05da46fb.js"><link rel="prefetch" href="/assets/js/13.48c7aea7.js"><link rel="prefetch" href="/assets/js/14.948e450b.js"><link rel="prefetch" href="/assets/js/15.9df52e2d.js"><link rel="prefetch" href="/assets/js/16.b4c21cfd.js"><link rel="prefetch" href="/assets/js/17.979b1c37.js"><link rel="prefetch" href="/assets/js/18.d3e10269.js"><link rel="prefetch" href="/assets/js/19.98b1b60e.js"><link rel="prefetch" href="/assets/js/21.c9283b8e.js"><link rel="prefetch" href="/assets/js/22.149cecca.js"><link rel="prefetch" href="/assets/js/23.67125a57.js"><link rel="prefetch" href="/assets/js/24.36b5ef6d.js"><link rel="prefetch" href="/assets/js/4.669b3083.js"><link rel="prefetch" href="/assets/js/5.1a2bf215.js"><link rel="prefetch" href="/assets/js/6.fa23b811.js"><link rel="prefetch" href="/assets/js/7.2df3f4b8.js"><link rel="prefetch" href="/assets/js/8.eee1554a.js"><link rel="prefetch" href="/assets/js/9.a6a7b906.js">
    <link rel="stylesheet" href="/assets/css/3.styles.0523860e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container vuepress-theme-simple"><header class="header"><a href="/" title="Ventus` Blog" class="site-name router-link-active">
      LuSia Ventus
    </a> <div style="clear: both"></div> <!----></header> <section class="post-view"><div class="post-head"><h1 class="post-title">
      Hello World
    </h1> <time datetime="1/20/2022, 1:56:09 AM" title="1/20/2022, 1:56:09 AM" pubdate="pubdate" class="post-date">
  1 year ago
</time></div> <div class="content__default"><blockquote><p><em><strong>Build this site Hugo Blog 实战</strong></em></p></blockquote> <ul><li><a href="#%E9%97%B2%E8%A8%80%E7%A2%8E%E8%AF%AD">闲言碎语</a> <ul><li><a href="#%E4%BB%8E%E4%BF%A1%E7%94%A8%E5%8D%A1%E8%81%8A%E5%88%B0%E9%99%88%E5%B9%B4%E5%BE%80%E4%BA%8B">从信用卡聊到陈年往事</a></li> <li><a href="#%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9hexo%E4%B8%8Ehugo">如何选择Hexo与Hugo？</a></li> <li><a href="#%E6%9C%80%E7%BB%88%E9%80%89%E6%8B%A9">最终选择</a></li></ul></li> <li><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">准备工作</a> <ul><li><a href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83%E5%92%8C%E5%B7%A5%E5%85%B7">安装环境和工具</a></li></ul></li> <li><a href="#%E5%BC%80%E5%A7%8B%E5%AE%9E%E6%88%98">开始实战</a> <ul><li><a href="#%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA">本地搭建</a> <ul><li><a href="#%E5%B0%86-hugo-%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">将 hugo 添加到环境变量</a></li> <li><a href="#git-bash">Git Bash</a></li> <li><a href="#%E6%96%87%E4%BB%B6%E5%A4%B9%E5%86%85%E5%AE%B9%E7%9B%AE%E5%BD%95">文件夹内容目录</a></li> <li><a href="#%E5%AE%89%E8%A3%85-vs-code-%E6%8F%92%E4%BB%B6">安装 VS code 插件</a></li> <li><a href="#%E7%94%9F%E6%88%90-git-%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93">生成 git 本地仓库</a></li> <li><a href="#%E7%94%9F%E6%88%90-ssh-%E5%AF%86%E9%92%A5">生成 SSH 密钥</a></li> <li><a href="#%E5%AE%89%E8%A3%85%E4%B8%BB%E9%A2%98">安装主题</a></li> <li><a href="#%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA%E9%A2%84%E8%A7%88">本地搭建预览</a></li></ul></li> <li><a href="#%E6%A0%B9%E7%9B%AE%E5%BD%95%E5%90%8C%E6%AD%A5%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93">根目录同步私有仓库</a> <ul><li><a href="#%E6%BA%90%E7%A0%81-public-%E5%88%86%E5%BC%80%E5%AD%98%E6%94%BE">源码&amp; Public 分开存放</a></li> <li><a href="#%E4%B8%8A%E4%BC%A0%E5%85%AC%E9%92%A5">上传公钥</a></li> <li><a href="#%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95">远程连接测试</a></li> <li><a href="#%E7%94%9F%E6%88%90-token%E7%94%A8%E4%BA%8E%E8%BF%9E%E6%8E%A5%E4%B8%A4%E4%B8%AA%E4%BB%93%E5%BA%93">生成 Token，用于连接两个仓库</a></li> <li><a href="#push-%E6%9C%AC%E5%9C%B0%E5%88%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93">Push 本地到私有仓库</a></li> <li><a href="#%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E7%94%9F%E6%88%90-secrets">私有仓库生成 Secrets</a></li></ul></li> <li><a href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%88%B0%E5%85%AC%E5%BC%80%E4%BB%93%E5%BA%93">自动部署到公开仓库</a></li> <li><a href="#cdn%E5%8A%A0%E9%80%9F">CDN加速</a></li> <li><a href="#%E5%A4%A7%E5%8A%9F%E5%91%8A%E6%88%90">大功告成</a></li></ul></li> <li><a href="#%E5%A1%AB%E5%9D%91%E5%90%8E%E8%AE%B0">填坑后记</a></li> <li><a href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E">写在最后</a></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.02</span><span class="token number">.11</span> add 侧边栏 鼠标指针 样式
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.01</span><span class="token number">.26</span> Update autodeploy<span class="token punctuation">.</span>yml 实现 Hugo Blog 源码github  gitee  <span class="token function">gitlab三端同步</span> <span class="token punctuation">(</span>可以没有 <span class="token operator">|</span> 就很帅<span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.01</span><span class="token number">.26</span> Done 😎
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.01</span><span class="token number">.26</span> <span class="token operator">&lt;</span>争取一口气把剩下的内容填完<span class="token operator">&gt;</span> 并没有 <span class="token operator">|</span> Markdown的排版比码字更费事 💦
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.01</span><span class="token number">.24</span> 简简单单的两个美化项目又变成了好几个      😥 😥 😥
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.01</span><span class="token number">.23</span> 前言 <span class="token operator">&lt;</span>写了一些废话<span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">+</span> <span class="token number">2022.01</span><span class="token number">.20</span> 萌生写下这篇文章的想法 并把大纲po在这里
</code></pre></div><h2 id="闲言碎语"><a href="#闲言碎语" class="header-anchor">#</a> 闲言碎语</h2> <h3 id="从信用卡聊到陈年往事"><a href="#从信用卡聊到陈年往事" class="header-anchor">#</a> 从信用卡聊到陈年往事</h3> <ul><li><p>前段时间，在老婆的支持下(“盗”刷老婆信用卡，orz)，买了一个十年的域名，起初拿来也就无非是给服务器套个域名，加个SSL，反代一些需要用到的web工具。想着这个域名好歹也是<code>千挑万选</code>出来的（Sia刚好与老婆名字谐音，所以自然而然地在前面加个Luv不过分吧，2333），现在的朋友圈基本上也没咋发过东西，全都是一些工作上的琐事。不如开个博客，记录一下生活（主要是用着这么有<code>内涵</code>的域名，让老婆感受一下应有的尊重，还能升华彼此的感情，哈哈哈，扯远了），还可以把自己“搞机爱好”（<code>折腾癖好</code>）的过程记录下，把<a href="https://luvsia.com/" target="_blank" rel="noopener noreferrer">README<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中所说的<code>Ctrl+C</code>，<code>Ctrl+V</code>变为自己的知识，而不是只会复制粘贴，成了一个<code>工具</code>人。让这项爱好不至于太肤浅，还能真正掌握一下基础的编程知识。</p></li> <li><p>这篇博客，主要是记录下整个Blog的搭建基本思路与部署过程，Blog完成<code>Hello World</code>之后，后续一直在跟进基础美化、插件适配的工作，所以这篇文章也就搁置如今。“简简单单”的~<s>两个美化项目</s>~，碍于能力有限，三天时间才完成80%，真<code>tm</code>惨...</p></li> <li><p>在刚接触到Blog搭建还是在近6年以前，也是搞了个域名，搭了服务器，并把博客部署在服务器上，用的是<code>WordPress</code>。在当时，<code>WordPress</code>就已经是一个成熟的网站建设工具。<code>WordPress</code>功能是挺强大，主题、插件多，用户量基数也大，很容易就可以找到一些自己喜欢的“小物件”放到自己的博客上。奈何当时对代码之类的东西一窍不通，完全是通过可视化操作去完成的，也就不知道Go语言与PHP语言的区别，当然PHP语言在当时依然是主流。那会儿不仅要把精力放在服务器的维护上，还要把网站的Blog给弄好，还要用到Nginx、Mysql、phpmyadmin一大堆工具，还要在数据库中修改才能满足一些自己的需求，可以说是十分的繁琐。后来因为原服务器废弃，数据也没有转移，也没有本地保存，折腾的东西也就随之而去了...</p></li> <li><p>很久没有接触这方面的知识，现在就相当于回炉重造。了解了一下目前主流的Blog建站工具之后，Hexo和Hugo进入我的眼帘。从搜索引擎的数据上来看，Hexo的内容量与Hugo相比，完全不在一个数量级...
<img src="/images/hello-world/Hexo.png" alt="Hexo"> <img src="/images/hello-world/Hugo.png" alt="Hugo"></p></li> <li><p>传统在服务器部署，虽然本地也可以操作，修改内容，但大部分人都是仅仅只在服务器上完成，省去了本地修改、远程部署的步骤。导致服务器一崩，所有数据都随风而去...比如我自己在几年前也是如此。现如今，静态网站成为主流，Go语言也让国际大厂争先使用，像<strong>Google，Dropbox，SoundCloud，Twitter，PayPal</strong>等公司都用 Go 语言构建了他们的后端系统。</p></li></ul> <h3 id="如何选择hexo与hugo"><a href="#如何选择hexo与hugo" class="header-anchor">#</a> 如何选择Hexo与Hugo？</h3> <p><strong>Hugo中文文档：</strong></p> <ul><li>Hugo是由Go语言实现的静态网站生成器。简单、易用、高效、易扩展、快速部署。当前的静态网站生成工具对环境依赖过多，性能较差，于是使用 Go 语言写了一个静态网站生成器 Hugo。不仅解决了环境依赖、性能较差的问题，还有使用简单、部署方便等诸多优点，通过 LiveReload 实时刷新，极大的优化文章的写作体验。Hugo 能做什么？通过 Hugo 你可以快速搭建你的静态网站，比如博客系统、文档介绍、公司主页、产品介绍等等。</li></ul> <p><strong>Hexo中文文档：</strong></p> <ul><li>什么是Hexo ? Hexo是一款基于Node.js的静态博客框架,依赖少易于安装使用,可以方便的生成静态网页托管在GitHub和Heroku上,是搭建博客的首选框架。</li></ul> <h3 id="最终选择"><a href="#最终选择" class="header-anchor">#</a> 最终选择</h3> <ul><li>可以看出，Hexo与Hugo都是静态网站生成器的首选，而且都可以用上<a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer"><code>Github-Pages</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。在网上筛选了使用者反馈信息之后，最终我还是选择了用Go语言编写的<code>Hugo</code>+<code>Github-Pages</code>+<code>CDN</code>来搭建此Blog。</li></ul> <h2 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h2> <h3 id="安装环境和工具"><a href="#安装环境和工具" class="header-anchor">#</a> 安装环境和工具</h3> <table><thead><tr><th>环境</th> <th></th> <th></th> <th>工具</th> <th></th></tr></thead> <tbody><tr><td>Windows</td> <td>Hugo</td> <td>Git</td> <td>VS code</td> <td>github-pages</td></tr></tbody></table> <ul><li><p><a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VS Code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：巨硬出品的一款开发集成工具。功能之强大让我感觉，我之前的传统敲代码、找依赖的方式太2了。</p></li> <li><p><a href="https://git-scm.com/" target="_blank" rel="noopener noreferrer">Git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：一个版本控制系统，连接 Github 的钥匙。</p></li> <li><p><a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">Github-pages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：Github出品，必属精品！等等，这句话怎么这么耳熟？又想到github也被巨硬收购了...细思极恐...</p></li> <li><p><a href="https://github.com/gohugoio/hugo/releases" target="_blank" rel="noopener noreferrer">Hugo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：今天的主角，本地新建一个名为&quot;Hugo&quot;的目录、一个名为&quot;Sites&quot;的用于存放所有博客站点的目录，Hugo 目录下应有三个文件；同时，下载好 Git 程序。</p></li></ul> <h2 id="开始实战"><a href="#开始实战" class="header-anchor">#</a> 开始实战</h2> <h3 id="本地搭建"><a href="#本地搭建" class="header-anchor">#</a> 本地搭建</h3> <h4 id="将-hugo-添加到环境变量"><a href="#将-hugo-添加到环境变量" class="header-anchor">#</a> 将 hugo 添加到环境变量</h4> <ul><li><code>WIN+R</code> 输入 <code>sysdm.cpl</code> ，<code>高级</code>===&gt;&gt; <code>环境变量</code> ===&gt;&gt; <code>Path</code> ===&gt;&gt; 添加刚才新建的 <code>Hugo</code> 中的 <code>bin</code> 目录， <code>bin</code> 中放进刚刚下载的 <code>hugo.exe</code></li></ul> <blockquote><p>Hugo</p> <blockquote><p>bin</p> <blockquote><p>hugo.exe</p></blockquote> <p>Site</p> <blockquote><p>example</p></blockquote></blockquote></blockquote> <h4 id="git-bash"><a href="#git-bash" class="header-anchor">#</a> Git Bash</h4> <ul><li>进入 Site 文件夹，鼠标右键 <code>Git Bash</code> 或打开 <code>Git Bash</code> 后 <code>cd</code> 到这个目录，创建 hugo 博客所在目录</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>hugo <span class="token keyword">new</span> site <span class="token generics"><span class="token punctuation">&lt;</span>example<span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="文件夹内容目录"><a href="#文件夹内容目录" class="header-anchor">#</a> 文件夹内容目录</h4> <blockquote><p><strong>example</strong></p> <blockquote><p><strong>archetypes</strong> # 存放模板</p> <blockquote><p><strong>default.md</strong> # 模板</p></blockquote> <p><strong>config.toml</strong> # 基础配置文件</p> <p><strong>content</strong> # 存放 page 与 post，所有新博文都要存放在 content 中</p> <p><strong>data</strong> # 存放数据模板</p> <p><strong>layouts</strong> # 存放布局模板文件，如果想要调整主题中的页面布局，可以在 layouts 中放入同名文件，hugo 将优先读取根目录中的 layouts 文件，避免直接修改主题文件，导致不必要的错误</p> <p><strong>static</strong> # 存放静态资源，比如自定义 css、图片图标等</p> <p><strong>themes</strong> # 主题文件夹</p></blockquote></blockquote> <h4 id="安装-vs-code-插件"><a href="#安装-vs-code-插件" class="header-anchor">#</a> 安装 VS code 插件</h4> <ul><li><p>打开 VS Code 软件。点击Extensions，安装所需插件。推荐几个必备和好用的插件。</p> <ul><li><p><strong>gpm</strong> 用来管理 Github 上的文件。 <strong>必备</strong></p></li> <li><p><strong>Setting Sync</strong> 同步 Github 与本地文件。 <strong>必备</strong></p></li> <li><p><strong>Markdown All in One</strong> 使用 Markdown 写作的利器。<strong>必备</strong></p></li> <li><p><strong>Chinese Language Pack for Visual Studio Code</strong> VS Code 的汉化插件。 <em>推荐</em></p></li> <li><p><strong>Auto Rename Tag</strong> 如果涉及修改代码的时候，非常好用。<em>推荐</em></p></li> <li><p><strong>Material Icon Theme</strong> 一套个性的图标主题。 <em>推荐</em></p></li></ul></li></ul> <h4 id="生成-git-本地仓库"><a href="#生成-git-本地仓库" class="header-anchor">#</a> 生成 git 本地仓库</h4> <ul><li>进入新生成的博客文件夹并初始化一个空的 git 本地仓库，之后博客文件夹里会出现一个隐藏的.git 文件夹</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>cd <span class="token operator">&lt;</span>example<span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>git init
</code></pre></div><h4 id="生成-ssh-密钥"><a href="#生成-ssh-密钥" class="header-anchor">#</a> 生成 SSH 密钥</h4> <p><em><strong>仅首次，后面可以记录下，以备使用</strong></em></p> <ul><li>SSH key 一般存储在系统盘 C: \Users&lt;用户名&gt;.ssh 目录中，git 全局设置存在 C: \Users&lt;用户名&gt;.gitconfig 文件中。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">&quot;example@email.com&quot;</span> <span class="token comment">#最好是github账号邮箱。</span>
</code></pre></div><ul><li><p>之后会跳出一堆提示，在系统提示输入 passphrase 时直接回车不添加。生成的密钥对会储存在 C: \Users&lt;用户名&gt;.ssh 中，公钥存放在 id_rsa.pub 里，私钥存放在 id_rsa 里，妥善保管密钥对，公钥稍后需要使用，私钥非极特殊情况勿上传！</p></li> <li><p>在博客根目录进行 git 的配置。最好是github账号、邮箱。本地提交 commit 时 github 上可以查看提交者信息。</p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> config user.name <span class="token string">&quot;examplename&quot;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> config user.email <span class="token string">&quot;example@email.com&quot;</span>
</code></pre></div><h4 id="安装主题"><a href="#安装主题" class="header-anchor">#</a> 安装主题</h4> <ul><li><p><strong>找到喜欢的<a href="https://themes.gohugo.io/themes/github-style" target="_blank" rel="noopener noreferrer">主题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，在themes目录下 git clone 或者 git submodule add ，模块化安装能够方便升级主题(根目录上传到GitHub后，themes文件夹会链接到主题仓库界面，后面要用到的action要想跑起来一定要记得加上submodule的配置）。</strong></p></li> <li><p><strong>以本博客主题为例，用模块方式安装， themes/github-style 为安装到目标文件夹</strong></p></li></ul> <div class="language-c extra-class"><pre class="language-c"><code>git submodule add git@github<span class="token punctuation">.</span>com<span class="token operator">:</span>MeiK2333<span class="token operator">/</span>github<span class="token operator">-</span>style<span class="token punctuation">.</span>git themes<span class="token operator">/</span>github<span class="token operator">-</span>style
</code></pre></div><ul><li>打开新的 config.toml 文件，修改 theme = “example-theme” 为你安装的主题名，主题名要与 themes 中的主题文件夹名称一致。</li></ul> <h4 id="本地搭建预览"><a href="#本地搭建预览" class="header-anchor">#</a> 本地搭建预览</h4> <ul><li>至此，本地博客就搭建好了。在博客根目录下 git bash，使用 hugo server 来看下主题的效果！（hugo server -D 的话草稿也会显示，注意是大写 D）跳出一大堆提示后，在任意浏览器打开 <a href="http://localhost:1313" target="_blank" rel="noopener noreferrer">http://localhost:1313<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 就能实时查看博客效果与调整。如果的博客设置有误，页面会无法查看，请先排除错误后再进行尝试。不需要查看后 Ctrl+C 退出即可。</li></ul> <h3 id="根目录同步私有仓库"><a href="#根目录同步私有仓库" class="header-anchor">#</a> 根目录同步私有仓库</h3> <h4 id="源码-public-分开存放"><a href="#源码-public-分开存放" class="header-anchor">#</a> 源码&amp; Public 分开存放</h4> <ul><li>建两个 <strong>repositories</strong> ，一个存放<strong>根目录文件</strong>，设置为私密，另一个用来存放 <strong>public</strong> 中的内容，设置为公开</li></ul> <h4 id="上传公钥"><a href="#上传公钥" class="header-anchor">#</a> 上传公钥</h4> <p><em><strong>这里选择直接上传到该 github 用户的 setting 里</strong></em></p> <ul><li>点击 github 页面右上角头像右侧下拉按钮，进入 <strong>Settings</strong>，找到左侧页面 <strong>SSH and GPG keys</strong> ，点击 <strong>New SSH key</strong> ，取一个便于识别的名称，下方填入之前生成的id_rsa.pub中的内容（以&quot;ssh-rsa&quot;开头，以邮箱结尾）。</li></ul> <h4 id="远程连接测试"><a href="#远程连接测试" class="header-anchor">#</a> 远程连接测试</h4> <div class="language-java extra-class"><pre class="language-java"><code>ssh <span class="token operator">-</span><span class="token class-name">T</span> git<span class="token annotation punctuation">@github.com</span>
</code></pre></div><p><em><strong>显示 successfully 字样即可</strong></em></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Hi</span> <span class="token operator">&lt;</span>github<span class="token operator">-</span>username<span class="token operator">&gt;</span><span class="token operator">!</span> <span class="token class-name">You</span>'ve successfully authenticated<span class="token punctuation">,</span> but <span class="token class-name">GitHub</span> does not provide shell access<span class="token punctuation">.</span>
</code></pre></div><h4 id="生成-token-用于连接两个仓库"><a href="#生成-token-用于连接两个仓库" class="header-anchor">#</a> 生成 Token，用于连接两个仓库</h4> <ul><li><p>右上角 <strong>Settings</strong> 里找到 <strong>Developer settings</strong> ，再点 <strong>Personal access tokens</strong> ，<strong>Generate new token</strong> 生成新的 <strong>token</strong> ，有效期可选永久生效。</p></li> <li><p><strong>Select scopes</strong> 里勾选 <strong>repo</strong> 全部内容与 <strong>workflow</strong>。最后点击绿色按钮生成。</p></li> <li><p>页面刷新后这个 <strong>Token</strong> 将不再显示，所以在导入前不要弄丢！</p></li></ul> <h4 id="push-本地到私有仓库"><a href="#push-本地到私有仓库" class="header-anchor">#</a> Push 本地到私有仓库</h4> <ul><li><p>打开刚刚建立的私有仓库，复制SSH克隆代码，在 VS code 中的项目管理中点 + 克隆，粘贴，回车即可克隆。前提：本地的公钥与 github 设置里的公钥信息要一致。至此远程与本地即可连接成功。</p></li> <li><p>将本地的博客根目录内容全部粘贴到连接好的私有仓库，开始 push。git 默认的分支应该是(master)，因为现在 github 的默认分支从 master 换成了 main（详见 GitHub 将替换掉 master 等术语 ），我们先切换分支到main：</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>git checkout <span class="token operator">-</span>b main
</code></pre></div><ul><li>push 命令三件套</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span class="token comment"># 添加目录下全部内容</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;new job&quot;</span> <span class="token comment"># 提交说明，出问题了可以回退到之前的commit</span>
<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin main <span class="token comment"># 将本地内容推送到远程</span>
</code></pre></div><ul><li><p>有时候新提交的本地有删除的内容，但是远端并没有删除，将 <code>-m</code> 改为 <code>-am</code> 即可</p></li> <li><p>空文件夹不会被 push 上去，不管；如果有其他文件、文件夹不想 push 上去，在根目录下新建 .gitignore 文件，里面存放不想 push 的内容。</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code>  idea<span class="token operator">/</span>            <span class="token comment">//忽略idea目录下的所有文件</span>
  <span class="token operator">/</span>idea<span class="token operator">/</span><span class="token keyword">do</span><span class="token punctuation">.</span>txt     <span class="token comment">//忽略某个具体文件</span>
  <span class="token operator">!</span>test<span class="token punctuation">.</span>txt        <span class="token comment">//不忽略 test.txt 文件</span>
  <span class="token operator">/</span><span class="token constant">TODO</span>            <span class="token comment">//仅仅忽略项目根目录下的 TODO 文件，不包括 test/TODO</span>
  <span class="token operator">*</span><span class="token punctuation">.</span>zip            <span class="token comment">//忽略所有.zip结尾的文件</span>
  doc<span class="token comment">/*.txt        //忽略 doc/notes.txt,但不包括 doc/server/arch.txt
  git rm -r --cached idea/do.txt    //-r为递归
</span></code></pre></div><h4 id="私有仓库生成-secrets"><a href="#私有仓库生成-secrets" class="header-anchor">#</a> 私有仓库生成 Secrets</h4> <ul><li>这一步为自动部署到 public 做准备，进入刚刚建好的 repository，点进它的 <strong>Settings</strong> 中，找到 <strong>Secrets</strong>，点击 <strong>New repository secret</strong>，名称为 <strong>PERSONAL_TOKEN</strong> ，内容为之前备份下来的 <a href="/post/hello-world/#生成-token用于连接两个仓库"><strong>Token</strong></a>。</li></ul> <h3 id="自动部署到公开仓库"><a href="#自动部署到公开仓库" class="header-anchor">#</a> 自动部署到公开仓库</h3> <p><strong><code>Github Action</code></strong></p> <ul><li>进入博客根目录仓库，点上方的 Actions，set up a workflow yourself，之后你会发现 github 会在根目录下新建/.github/workflows/xxx.yml 文件。我的文件名 <strong>autodeploy.yml</strong> 。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>name: luvsia-hugo-blog-autodeploy <span class="token comment"># 自行命名</span>

on:
  push:
    branches:
      - main  <span class="token comment"># 博客根目录的默认分支，这里是main，也可是master</span>
  pull_request:

jobs:
  deploy:
    runs-on: ubuntu-latest
    concurrency:
      group: <span class="token variable">${{ github.workflow }</span><span class="token punctuation">}</span>-<span class="token variable">${{ github.ref }</span><span class="token punctuation">}</span>
    steps:
      - uses: actions/checkout@v2
        with:               <span class="token comment"># 如果你安装主题时用的是git submodule add</span>
          submodules: <span class="token boolean">true</span>  <span class="token comment"># 那么这三行不必注释掉，这一行填写 true</span>
          fetch-depth: <span class="token number">0</span>    <span class="token comment"># Fetch all history for .GitInfo and .Lastmod</span>

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: <span class="token string">'latest'</span>  <span class="token comment"># 获取最新版本的hugo</span>
          extended: <span class="token boolean">true</span>          <span class="token comment"># 如果你使用的不是extended版本的hugo，将true改为false</span>

      - name: Build
        run: hugo   <span class="token comment"># 使用hugo构建静态网页</span>

      - name: Deploy to github
        uses: peaceiris/actions-gh-pages@v3
        if: <span class="token variable">${{ github.ref == 'refs<span class="token operator">/</span>heads<span class="token operator">/</span>main' }</span><span class="token punctuation">}</span>  <span class="token comment"># 注意填写main或者master</span>
        with:
          personal_token: <span class="token variable">${{ secrets.PERSONAL_TOKEN }</span><span class="token punctuation">}</span> <span class="token comment"># 如果secret取了其他名称，将PERSONAL_TOKEN替换掉</span>
          external_repository: ventusoon/LuvSia <span class="token comment"># 填写远程 public 仓库 </span>
          publish_dir: ./public
          cname: luvsia.com        <span class="token comment"># 填写自定义域名</span>
</code></pre></div><ul><li><p><em><strong>格式参考<a href="https://github.com/marketplace/actions/github-pages-action#%EF%B8%8F-set-personal-access-token-personal_token" target="_blank" rel="noopener noreferrer">GitHub Pages action<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></em></p></li> <li><p>提交 <strong>commit</strong> ，保存， <strong>Action</strong> 变成绿色即成功！</p></li> <li><p>这时公开仓库已经自动建了一个名为 <strong>gh-pages</strong> 的分支，里面出现的东西就是源码通过 <code>Hugo</code> 命令生成的静态网页文件，此时打开博客域名就可以看到博客内容。</p></li> <li><p>根目录下的 config 文件中 base url 更换为自定义域名。</p></li></ul> <h3 id="cdn加速"><a href="#cdn加速" class="header-anchor">#</a> CDN加速</h3> <ul><li>在Cloudflare为自定义域名添加 CNAME 记录，以及四条 A 记录，详见 github 官方说明： <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#about-custom-domain-configuration" target="_blank" rel="noopener noreferrer">Managing a custom domain for your GitHub Pages site<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token constant">A</span> @ <span class="token number">185.199</span><span class="token number">.108</span><span class="token number">.153</span>
<span class="token constant">A</span> @ <span class="token number">185.199</span><span class="token number">.109</span><span class="token number">.153</span>
<span class="token constant">A</span> @ <span class="token number">185.199</span><span class="token number">.110</span><span class="token number">.153</span>
<span class="token constant">A</span> @ <span class="token number">185.199</span><span class="token number">.111</span><span class="token number">.153</span>
<span class="token constant">CNAME</span> @ 指向公开仓库的github域名
<span class="token constant">CNAME</span> <span class="token constant">WWW</span> 指向公开仓库的github域名
</code></pre></div><ul><li><p>进入公开仓库 <strong>Settings</strong> ，<strong>Pages</strong> 页面添加自定义域名，等待 DNS 检验成功，在此页面即可看到 <em><strong>仓库的github域名</strong></em>` 。</p></li> <li><p>使用了 CDN，github 上的 <strong>强制https</strong> 按钮可能不能点；如果无法正常显示 https，也可以在Cloudflare建立 <strong>强制https</strong> 规则。</p></li></ul> <h3 id="大功告成"><a href="#大功告成" class="header-anchor">#</a> 大功告成</h3> <h2 id="填坑后记"><a href="#填坑后记" class="header-anchor">#</a> 填坑后记</h2> <ol><li>写新文章最好用命令行新建 md 文件，文件名为英文名最佳，增加解析效率。</li></ol> <div class="language-java extra-class"><pre class="language-java"><code>hugo <span class="token keyword">new</span> post<span class="token operator">/</span>first<span class="token operator">-</span>post<span class="token punctuation">.</span>md
</code></pre></div><ol start="2"><li>如在远程端操作过，则在本地执行操作前，都要 git pull 拉取远端数据，同步到本地。上面我们在远程博客根目录新建了 workflow，在本地开始写新的博文前，先在本地的博客根目录进行同步，不然会报错：</li></ol> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>git pull
</code></pre></div><ol start="3"><li>执行 hugo server 过程中错误退出 git，导致之后执行时 1313 端口被占用，windows+r 输入 cmd 或者在VS code中打开 powershell 窗口：</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">netstat</span> -aon<span class="token operator">|</span>findstr <span class="token string">&quot;1313&quot;</span>  <span class="token comment">#筛选使用1313端口的进程</span>
taskkill /f /PID xxxxx  <span class="token comment">#杀死占用的进程</span>
</code></pre></div><ol start="4"><li>重大更新！！！实现 <a href="/post/hello-world/">Hugo Blog</a> 源码github、gitee、gitlab三端同步，<strong>特别注意</strong>『格式』，最好在github中添加，避免出错！</li></ol> <ul><li><p><em><strong>分别在gitee、gitlab上新建公钥文件，取名分别为GITEE_KEY、GITLAB_KEY</strong></em></p></li> <li><p><em><strong>更新 autodeploy.yml 文件，在后面加上如下代码</strong></em></p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>  mirror_to_gitee:
    runs-on: ubuntu-latest
    steps:
      - name: <span class="token string">'Checkout'</span>
        uses: actions/checkout@v1
      - name: <span class="token string">'Mirror to gitee'</span>
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url:
            git@gitee.com:ventusoon/LuvSia.com.git  <span class="token comment"># gitee仓库链接</span>
          ssh_private_key:
            <span class="token variable">${{ secrets.GITEE_KEY }</span><span class="token punctuation">}</span>  <span class="token comment"># 新建的GITEE_KEY</span>

  mirror_to_gitlab:
    runs-on: ubuntu-latest
    steps:
      - name: <span class="token string">'Checkout'</span>
        uses: actions/checkout@v1
      - name: <span class="token string">'Mirror to gitlab'</span>
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url:
            git@gitlab.com:ventusoon/LuvSia.com.git  <span class="token comment"># gitlab仓库链接</span>
          ssh_private_key:
            <span class="token variable">${{ secrets.GITLAB_KEY }</span><span class="token punctuation">}</span>  <span class="token comment"># 新建的GILAB_KEY</span>
</code></pre></div><ul><li><strong>Gitee</strong></li></ul> <p><img src="/images/hello-world/gitee.png" alt="gitee"></p> <ul><li><strong>Gitlab</strong></li></ul> <p><img src="/images/hello-world/gitlab.png" alt="gitlab"></p> <ol start="5"><li><strong>新增 <a href="https://www.antmoe.com/posts/a811d614/" target="_blank" rel="noopener noreferrer">小康博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 鼠标指针、侧边栏样式。</strong></li></ol> <ul><li><em><strong>在 <code>extended_head.html</code> 中添加以下</strong></em></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="写在最后"><a href="#写在最后" class="header-anchor">#</a> 写在最后</h2> <p><strong>本篇文章的<a href="/hello-world/#开始实战">部署流程</a>对网上教程进行了整合，再加上自己的理解而成。</strong></p></div></section> <footer class="footer">
  © 2023
  <i class="icon-user"></i>
  Ventus
  <br>
  Powered by
  <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">VuePress</a>
  | Theme
  <a href="https://github.com/viko16/vuepress-theme-simple" rel="noopener" target="_blank">Simple</a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.daa4b047.js" defer></script><script src="/assets/js/0.64ac24e1.js" defer></script><script src="/assets/js/20.3be70d4f.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{256:function(a,s,t){"use strict";t.r(s);var e=t(14),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("blockquote",[s("p",[s("em",[s("strong",[a._v("Deploying Static Web Pages with Nginx Proxy Manager")])])])]),a._v(" "),s("ul",[s("li",[s("p",[a._v("搭建的 "),s("em",[a._v("web")]),a._v(" 服务因使用了 "),s("em",[s("strong",[s("s",[a._v("宝塔面板")])])]),a._v(" 抽风不能 "),s("em",[a._v("CDN")]),a._v(" ，导致访问失败，一气之下重装了系统，重新搭建了所有 "),s("em",[a._v("web")]),a._v("，并使用 "),s("em",[a._v("Nginx Proxy Manager")]),a._v(" 管理 "),s("em",[a._v("web")]),a._v(" 服务。")])]),a._v(" "),s("li",[s("p",[a._v("某些 "),s("em",[a._v("web")]),a._v(" 服务需要在 "),s("em",[a._v("Nginx Proxy Manager")]),a._v(" 的目录下构建，故在此记录下部署静态网页的流程备忘。")])])]),a._v(" "),s("h2",{attrs:{id:"搭建步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建步骤"}},[a._v("#")]),a._v(" 搭建步骤")]),a._v(" "),s("h3",{attrs:{id:"一、安装-docker-及-docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、安装-docker-及-docker-compose"}},[a._v("#")]),a._v(" 一、安装 "),s("em",[a._v("Docker")]),a._v(" 及 "),s("em",[a._v("Docker-compose")])]),a._v(" "),s("ul",[s("li",[a._v("安装 "),s("em",[a._v("Docker")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#更新、安装必备软件")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装docker：")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sSL")]),a._v(" https://get.docker.com/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#开机自动启动")]),a._v("\n\nsystemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n")])])]),s("ul",[s("li",[a._v("安装 "),s("em",[a._v("Docker-compose")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://github.com/docker/compose/releases/download/v2.22.0/docker-compose-'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uname")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uname")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /usr/local/bin/docker-compose\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /usr/local/bin/docker-compose\n")])])]),s("h3",{attrs:{id:"二、安装-nginx-proxy-manager-中文版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、安装-nginx-proxy-manager-中文版"}},[a._v("#")]),a._v(" 二、安装 "),s("a",{attrs:{href:"https://github.com/xiaoxinpro/nginx-proxy-manager-zh?utm_source=nginx-proxy-manager-zh",target:"_blank",rel:"noopener noreferrer"}},[s("em",[a._v("Nginx Proxy Manager")]),a._v(" 中文版"),s("OutboundLink")],1)]),a._v(" "),s("ul",[s("li",[a._v("创建目录")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /data/docker_data/npm\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /data/docker_data/npm\n")])])]),s("ul",[s("li",[a._v("创建 "),s("em",[a._v("docker-compose.yml")]),a._v(" 文件")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" docker-compose.yml\n")])])]),s("ul",[s("li",[a._v("在文件中填入以下内容，然后 "),s("em",[a._v("Ctrl+X")]),a._v(" 保存，按 "),s("em",[a._v("Y")]),a._v(" 退出")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("version: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'3'")]),a._v("\nservices:\n  app:\n    image: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'chishin/nginx-proxy-manager-zh:latest'")]),a._v("\n    restart: always\n    ports:\n      - "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'80:80'")]),a._v("\n      - "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'81:81'")]),a._v("\n      - "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'443:443'")]),a._v("\n    volumes:\n      - ./data:/data\n      - ./letsencrypt:/etc/letsencrypt\n")])])]),s("ul",[s("li",[a._v("创建完成后，运行")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\n")])])]),s("ul",[s("li",[a._v("然后就可以通过 IP:81 来访问 "),s("em",[a._v("Nginx Proxy Manager")]),a._v(" ，用初始账号密码登陆并修改。")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("Email:     admin@example.com\nPassword:  changeme\n")])])]),s("ul",[s("li",[a._v("反代  "),s("em",[a._v("Nginx Proxy Manager")]),a._v("，并添加 "),s("em",[a._v("SSL")]),a._v("。")])]),a._v(" "),s("details",[s("summary",[a._v("\nView Screenshots\n")]),a._v(" "),s("p",[s("img",{attrs:{src:"/images/nginx-proxy-manager/1.png",alt:"1",title:"反代 Nginx Proxy Manager"}}),a._v(" "),s("img",{attrs:{src:"/images/nginx-proxy-manager/2.png",alt:"2",title:"添加 SSL "}})])]),a._v(" "),s("h3",{attrs:{id:"三、创建静态网站目录-添加内容并反代"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、创建静态网站目录-添加内容并反代"}},[a._v("#")]),a._v(" 三、创建静态网站目录，添加内容并反代")]),a._v(" "),s("ul",[s("li",[a._v("在挂载的 "),s("em",[a._v("data")]),a._v(" 文件夹里面创建一个新的网站文件夹")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /data/docker_data/npm/data/sub.ven2s.cn\n")])])]),s("ul",[s("li",[a._v("将带有html文件的内容放到这个文件夹里面")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将/sub-web-modify/dist/文件夹下的所用文件移动到/data/docker_data/npm/data/sub.ven2s.cn/下")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" ~/sub-web-modify/dist/* /data/docker_data/npm/data/sub.ven2s.cn/\n")])])]),s("ul",[s("li",[s("p",[a._v("反代 "),s("em",[a._v("sub.ven2s.cn")]),a._v(" 加 "),s("em",[a._v("SSL")]),a._v("，并修改配置文件")]),a._v(" "),s("p",[s("img",{attrs:{src:"/images/nginx-proxy-manager/3.png",alt:"3",title:"修改配置文件"}})])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    root /data/sub.ven2s.cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    index index.html index.htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    error_page "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("404")]),a._v(" /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h2",{attrs:{id:"大功告成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#大功告成"}},[a._v("#")]),a._v(" 大功告成")])])}),[],!1,null,null,null);s.default=n.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>用Nginx Proxy Manager部署静态网页 | LuSia Ventus</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="/images/圆形pink.png">
    <meta name="description" content="Ventus` Blog">
    <meta name="keywords" content="LuSia Ventus, Ventus, vuepress-theme-simple, 博客, vue">
    <meta name="author" content="Ventus">
    
    <link rel="preload" href="/assets/css/3.styles.0523860e.css" as="style"><link rel="preload" href="/assets/js/app.daa4b047.js" as="script"><link rel="preload" href="/assets/js/0.64ac24e1.js" as="script"><link rel="preload" href="/assets/js/22.149cecca.js" as="script"><link rel="prefetch" href="/assets/js/1.ea54e935.js"><link rel="prefetch" href="/assets/js/10.4e625bc9.js"><link rel="prefetch" href="/assets/js/11.afa8792e.js"><link rel="prefetch" href="/assets/js/12.05da46fb.js"><link rel="prefetch" href="/assets/js/13.48c7aea7.js"><link rel="prefetch" href="/assets/js/14.948e450b.js"><link rel="prefetch" href="/assets/js/15.9df52e2d.js"><link rel="prefetch" href="/assets/js/16.b4c21cfd.js"><link rel="prefetch" href="/assets/js/17.979b1c37.js"><link rel="prefetch" href="/assets/js/18.d3e10269.js"><link rel="prefetch" href="/assets/js/19.98b1b60e.js"><link rel="prefetch" href="/assets/js/20.3be70d4f.js"><link rel="prefetch" href="/assets/js/21.c9283b8e.js"><link rel="prefetch" href="/assets/js/23.67125a57.js"><link rel="prefetch" href="/assets/js/24.36b5ef6d.js"><link rel="prefetch" href="/assets/js/4.669b3083.js"><link rel="prefetch" href="/assets/js/5.1a2bf215.js"><link rel="prefetch" href="/assets/js/6.fa23b811.js"><link rel="prefetch" href="/assets/js/7.2df3f4b8.js"><link rel="prefetch" href="/assets/js/8.eee1554a.js"><link rel="prefetch" href="/assets/js/9.a6a7b906.js">
    <link rel="stylesheet" href="/assets/css/3.styles.0523860e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container vuepress-theme-simple"><header class="header"><a href="/" title="Ventus` Blog" class="site-name router-link-active">
      LuSia Ventus
    </a> <div style="clear: both"></div> <!----></header> <section class="post-view"><div class="post-head"><h1 class="post-title">
      用Nginx Proxy Manager部署静态网页
    </h1> <time datetime="4/9/2023, 5:45:48 PM" title="4/9/2023, 5:45:48 PM" pubdate="pubdate" class="post-date">
  6 months ago
</time></div> <div class="content__default"><blockquote><p><em><strong>Deploying Static Web Pages with Nginx Proxy Manager</strong></em></p></blockquote> <ul><li><p>搭建的 <em>web</em> 服务因使用了 <em><strong><s>宝塔面板</s></strong></em> 抽风不能 <em>CDN</em> ，导致访问失败，一气之下重装了系统，重新搭建了所有 <em>web</em>，并使用 <em>Nginx Proxy Manager</em> 管理 <em>web</em> 服务。</p></li> <li><p>某些 <em>web</em> 服务需要在 <em>Nginx Proxy Manager</em> 的目录下构建，故在此记录下部署静态网页的流程备忘。</p></li></ul> <h2 id="搭建步骤"><a href="#搭建步骤" class="header-anchor">#</a> 搭建步骤</h2> <h3 id="一、安装-docker-及-docker-compose"><a href="#一、安装-docker-及-docker-compose" class="header-anchor">#</a> 一、安装 <em>Docker</em> 及 <em>Docker-compose</em></h3> <ul><li>安装 <em>Docker</em></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#更新、安装必备软件</span>

<span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token function">nano</span>

<span class="token comment">#安装docker：</span>

<span class="token function">curl</span> <span class="token parameter variable">-sSL</span> https://get.docker.com/ <span class="token operator">|</span> <span class="token function">sh</span>


<span class="token comment">#开机自动启动</span>

systemctl start <span class="token function">docker</span>

systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre></div><ul><li>安装 <em>Docker-compose</em></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/download/v2.22.0/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre></div><h3 id="二、安装-nginx-proxy-manager-中文版"><a href="#二、安装-nginx-proxy-manager-中文版" class="header-anchor">#</a> 二、安装 <a href="https://github.com/xiaoxinpro/nginx-proxy-manager-zh?utm_source=nginx-proxy-manager-zh" target="_blank" rel="noopener noreferrer"><em>Nginx Proxy Manager</em> 中文版<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ul><li>创建目录</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker_data/npm
<span class="token builtin class-name">cd</span> /data/docker_data/npm
</code></pre></div><ul><li>创建 <em>docker-compose.yml</em> 文件</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">nano</span> docker-compose.yml
</code></pre></div><ul><li>在文件中填入以下内容，然后 <em>Ctrl+X</em> 保存，按 <em>Y</em> 退出</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>version: <span class="token string">'3'</span>
services:
  app:
    image: <span class="token string">'chishin/nginx-proxy-manager-zh:latest'</span>
    restart: always
    ports:
      - <span class="token string">'80:80'</span>
      - <span class="token string">'81:81'</span>
      - <span class="token string">'443:443'</span>
    volumes:
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
</code></pre></div><ul><li>创建完成后，运行</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre></div><ul><li>然后就可以通过 IP:81 来访问 <em>Nginx Proxy Manager</em> ，用初始账号密码登陆并修改。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>Email:     admin@example.com
Password:  changeme
</code></pre></div><ul><li>反代  <em>Nginx Proxy Manager</em>，并添加 <em>SSL</em>。</li></ul> <details><summary>
View Screenshots
</summary> <p><img src="/images/nginx-proxy-manager/1.png" alt="1" title="反代 Nginx Proxy Manager"> <img src="/images/nginx-proxy-manager/2.png" alt="2" title="添加 SSL "></p></details> <h3 id="三、创建静态网站目录-添加内容并反代"><a href="#三、创建静态网站目录-添加内容并反代" class="header-anchor">#</a> 三、创建静态网站目录，添加内容并反代</h3> <ul><li>在挂载的 <em>data</em> 文件夹里面创建一个新的网站文件夹</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker_data/npm/data/sub.ven2s.cn
</code></pre></div><ul><li>将带有html文件的内容放到这个文件夹里面</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 将/sub-web-modify/dist/文件夹下的所用文件移动到/data/docker_data/npm/data/sub.ven2s.cn/下</span>
<span class="token function">mv</span> ~/sub-web-modify/dist/* /data/docker_data/npm/data/sub.ven2s.cn/
</code></pre></div><ul><li><p>反代 <em>sub.ven2s.cn</em> 加 <em>SSL</em>，并修改配置文件</p> <p><img src="/images/nginx-proxy-manager/3.png" alt="3" title="修改配置文件"></p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
    root /data/sub.ven2s.cn<span class="token punctuation">;</span>
    index index.html index.htm<span class="token punctuation">;</span>
    error_page <span class="token number">404</span> /index.html<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="大功告成"><a href="#大功告成" class="header-anchor">#</a> 大功告成</h2></div></section> <footer class="footer">
  © 2023
  <i class="icon-user"></i>
  Ventus
  <br>
  Powered by
  <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">VuePress</a>
  | Theme
  <a href="https://github.com/viko16/vuepress-theme-simple" rel="noopener" target="_blank">Simple</a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.daa4b047.js" defer></script><script src="/assets/js/0.64ac24e1.js" defer></script><script src="/assets/js/22.149cecca.js" defer></script>
  </body>
</html>

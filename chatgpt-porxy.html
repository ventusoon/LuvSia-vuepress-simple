<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ChatGPT-Porxy | LuSia Ventus</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="/images/圆形pink.png">
    <meta name="description" content="Ventus` Blog">
    <meta name="keywords" content="LuSia Ventus, Ventus, vuepress-theme-simple, 博客, vue">
    <meta name="author" content="Ventus">
    
    <link rel="preload" href="/assets/css/3.styles.0523860e.css" as="style"><link rel="preload" href="/assets/js/app.daa4b047.js" as="script"><link rel="preload" href="/assets/js/0.64ac24e1.js" as="script"><link rel="preload" href="/assets/js/11.afa8792e.js" as="script"><link rel="prefetch" href="/assets/js/1.ea54e935.js"><link rel="prefetch" href="/assets/js/10.4e625bc9.js"><link rel="prefetch" href="/assets/js/12.05da46fb.js"><link rel="prefetch" href="/assets/js/13.48c7aea7.js"><link rel="prefetch" href="/assets/js/14.948e450b.js"><link rel="prefetch" href="/assets/js/15.9df52e2d.js"><link rel="prefetch" href="/assets/js/16.b4c21cfd.js"><link rel="prefetch" href="/assets/js/17.979b1c37.js"><link rel="prefetch" href="/assets/js/18.d3e10269.js"><link rel="prefetch" href="/assets/js/19.98b1b60e.js"><link rel="prefetch" href="/assets/js/20.3be70d4f.js"><link rel="prefetch" href="/assets/js/21.c9283b8e.js"><link rel="prefetch" href="/assets/js/22.149cecca.js"><link rel="prefetch" href="/assets/js/23.67125a57.js"><link rel="prefetch" href="/assets/js/24.36b5ef6d.js"><link rel="prefetch" href="/assets/js/4.669b3083.js"><link rel="prefetch" href="/assets/js/5.1a2bf215.js"><link rel="prefetch" href="/assets/js/6.fa23b811.js"><link rel="prefetch" href="/assets/js/7.2df3f4b8.js"><link rel="prefetch" href="/assets/js/8.eee1554a.js"><link rel="prefetch" href="/assets/js/9.a6a7b906.js">
    <link rel="stylesheet" href="/assets/css/3.styles.0523860e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container vuepress-theme-simple"><header class="header"><a href="/" title="Ventus` Blog" class="site-name router-link-active">
      LuSia Ventus
    </a> <div style="clear: both"></div> <!----></header> <section class="post-view"><div class="post-head"><h1 class="post-title">
      ChatGPT-Porxy
    </h1> <time datetime="4/20/2023, 10:43:00 AM" title="4/20/2023, 10:43:00 AM" pubdate="pubdate" class="post-date">
  6 months ago
</time></div> <div class="content__default"><blockquote><p><em><strong>Build ChatGPT Reverse Proxy</strong></em></p></blockquote> <ul><li><em>ChatGPT-Web</em> 项目的免费代理挂了，故此，选择本项目 <a href="https://github.com/linweiyuan/go-chatgpt-api" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/github-go--chatgpt--api-pink" alt=""><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来解决代理问题。</li></ul> <h2 id="搭建步骤"><a href="#搭建步骤" class="header-anchor">#</a> 搭建步骤</h2> <h3 id="一、安装-docker-及-docker-compose"><a href="#一、安装-docker-及-docker-compose" class="header-anchor">#</a> 一、安装 <em>Docker</em> 及 <em>Docker-compose</em></h3> <ul><li>安装 <em>Docker</em></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#更新、安装必备软件</span>

<span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">wget</span> <span class="token function">nano</span>

<span class="token comment">#安装docker：</span>

<span class="token function">curl</span> <span class="token parameter variable">-sSL</span> https://get.docker.com/ <span class="token operator">|</span> <span class="token function">sh</span>


<span class="token comment">#开机自动启动</span>

systemctl start <span class="token function">docker</span>

systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre></div><ul><li>安装 <em>Docker-compose</em></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-L</span> <span class="token string">&quot;https://github.com/docker/compose/releases/download/v2.22.0/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>&quot;</span> <span class="token parameter variable">-o</span> /usr/local/bin/docker-compose
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code></pre></div><h3 id="二、安装-go-chatgpt-api"><a href="#二、安装-go-chatgpt-api" class="header-anchor">#</a> 二、安装 <a href="https://github.com/linweiyuan/go-chatgpt-api" target="_blank" rel="noopener noreferrer"><em>go-chatgpt-api</em> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ul><li>创建目录</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /data/docker_data/go-chatgpt-api
<span class="token builtin class-name">cd</span> /data/docker_data/go-chatgpt-api
</code></pre></div><ul><li>创建 <em>docker-compose.yml</em> 文件</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">nano</span> docker-compose.yml
</code></pre></div><ul><li>在文件中填入以下内容，然后 <em>Ctrl+X</em> 保存，按 <em>Y</em> 退出</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services:
  go-chatgpt-api:
    container_name: go-chatgpt-api
    image: linweiyuan/go-chatgpt-api
    ports:
      - <span class="token number">8080</span>:8080  <span class="token comment"># 容器端口映射到宿主机8080端口；宿主机监听端口可按需改为其它端口</span>
    environment:
      - <span class="token assign-left variable">GIN_MODE</span><span class="token operator">=</span>release
      - <span class="token assign-left variable">CHATGPT_PROXY_SERVER</span><span class="token operator">=</span>http://chatgpt-proxy-server:9515
      <span class="token comment">#- NETWORK_PROXY_SERVER=http://host:port     # NETWORK_PROXY_SERVER：科学上网代理地址，例如：http://10.0.5.10:7890</span>
      <span class="token comment">#- NETWORK_PROXY_SERVER=socks5://host:port   # NETWORK_PROXY_SERVER：科学上网代理地址</span>
    depends_on:
      - chatgpt-proxy-server
    restart: unless-stopped

  chatgpt-proxy-server:
    container_name: chatgpt-proxy-server
    image: linweiyuan/chatgpt-proxy-server
    restart: unless-stopped
</code></pre></div><ul><li>创建完成后，运行</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre></div><ul><li>检查运行的容器；确保容器状态为UP</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre></div><ul><li>检测容器映射到宿主机的监听端口是否监听</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>ss -tnlp<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">8080</span>
</code></pre></div><h3 id="三、使用自建反代"><a href="#三、使用自建反代" class="header-anchor">#</a> 三、使用自建反代</h3> <ul><li>使用access token模式，并使用我们自建的代理地址进行访问；自建IP的访问地址为 <em>http://ip:8080/conversation</em> ；如果不想让 <em>ip</em> 暴露，可以用 <em>nginx</em> 再反代 <em>ip</em> +端口， <em>https://example.com/conversation</em> 。</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 反向代理，可选</span>
    API_REVERSE_PROXY: https://example.com/conversation
</code></pre></div><ul><li>现在我们访问chatgpt-web，查看是否可以正常使用，注意确保 <em>chatgpt-proxy-server</em> 运行正常， <em>go-chatgpt-api</em> 需要初始化启动需要耐心等待</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看容器日志是否运行正常</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-f</span> chatgpt-proxy-server
<span class="token function">docker</span> logs <span class="token parameter variable">-f</span> go-chatgpt-api
</code></pre></div><h2 id="完工"><a href="#完工" class="header-anchor">#</a> 完工</h2> <p><img src="/images/ChatGPT-Porxy/1.png" alt="1" title=":smirk:"></p> <h2 id="本教程来源"><a href="#本教程来源" class="header-anchor">#</a> 本教程来源：<a href="https://github.com/dqzboy/ChatGPT-Porxy" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/badge/github-dqzboy/ChatGPT--Porxy-lemonchiffon" alt=""><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2></div></section> <footer class="footer">
  © 2023
  <i class="icon-user"></i>
  Ventus
  <br>
  Powered by
  <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">VuePress</a>
  | Theme
  <a href="https://github.com/viko16/vuepress-theme-simple" rel="noopener" target="_blank">Simple</a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.daa4b047.js" defer></script><script src="/assets/js/0.64ac24e1.js" defer></script><script src="/assets/js/11.afa8792e.js" defer></script>
  </body>
</html>
